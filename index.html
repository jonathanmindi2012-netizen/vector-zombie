<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Vector Zombies</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
  overflow:hidden;
}

/* ===== LOBBY ===== */
#lobby{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,#050505,#111);
  display:flex;
  justify-content:center;
  align-items:center;
}
#menu{
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(10px);
  padding:30px;
  border-radius:20px;
  text-align:center;
  width:85%;
  max-width:360px;
}
#menu h1{
  color:#00ff99;
  margin-bottom:20px;
}
#menu button{
  width:100%;
  padding:18px;
  font-size:22px;
  border:none;
  border-radius:15px;
  background:#00ff99;
  font-weight:bold;
}

/* ===== GAME ===== */
#game{display:none;}
canvas{
  display:block;
  background:#0a0a0a;
}

/* ===== HUD ===== */
#hud{
  position:fixed;
  top:10px;
  left:10px;
  font-size:16px;
}

/* ===== CONTROLS ===== */
#controls{
  position:fixed;
  inset:0;
  pointer-events:none;
}
.joy{
  pointer-events:auto;
  position:absolute;
  bottom:20px;
  left:20px;
  width:120px;
  height:120px;
  border-radius:50%;
  background:rgba(255,255,255,.05);
  border:2px solid rgba(255,255,255,.3);
}
.joy::after{
  content:"";
  position:absolute;
  inset:35px;
  border-radius:50%;
  background:rgba(255,255,255,.25);
}

.btn{
  pointer-events:auto;
  position:absolute;
  width:80px;
  height:80px;
  border-radius:50%;
  background:rgba(0,255,153,.25);
  border:2px solid #00ff99;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:32px;
}
#fire{bottom:25px; right:25px;}
#ray{bottom:120px; right:30px;}
#boom{bottom:215px; right:30px;}
</style>
</head>

<body>

<div id="lobby">
  <div id="menu">
    <h1>üßü ZOMBIE SHOOTER</h1>
    <button onclick="startGame()">PLAY</button>
  </div>
</div>

<div id="game">
  <canvas id="canvas"></canvas>

  <div id="hud">
    ‚ù§Ô∏è Vida: <span id="life">100</span><br>
    ‚ò†Ô∏è Kills: <span id="kills">0</span>
  </div>

  <div id="controls">
    <div class="joy" id="move"></div>
    <div class="btn" id="fire">üî´</div>
    <div class="btn" id="ray">‚ö°</div>
    <div class="btn" id="boom">üí•</div>
  </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

let player, bullets, zombies, kills;
let moving=false;
let moveDir=0;

function startGame(){
  lobby.style.display="none";
  game.style.display="block";

  player = {x:canvas.width/2,y:canvas.height-120,r:18,life:100};
  bullets=[];
  zombies=[];
  kills=0;

  setInterval(spawnZombie,1200);
  requestAnimationFrame(loop);
}

function spawnZombie(){
  zombies.push({
    x:Math.random()*canvas.width,
    y:-30,
    r:18,
    speed:1+Math.random()
  });
}

/* ===== CONTROLS ===== */
move.addEventListener("touchstart",e=>{
  const x = e.touches[0].clientX;
  moveDir = x < innerWidth/2 ? -1 : 1;
  moving=true;
});
move.addEventListener("touchend",()=>moving=false);

fire.addEventListener("touchstart",()=>{
  bullets.push({x:player.x,y:player.y,dy:-8});
});

ray.addEventListener("touchstart",()=>{
  if(kills>=5){
    zombies = zombies.filter(z=>Math.abs(z.x-player.x)>20);
    kills-=5;
  }
});

boom.addEventListener("touchstart",()=>{
  if(kills>=10){
    zombies=[];
    kills-=10;
  }
});

/* ===== LOOP ===== */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(moving){
    player.x += moveDir*4;
    player.x = Math.max(player.r, Math.min(canvas.width-player.r, player.x));
  }

  // PLAYER
  ctx.fillStyle="#00ff99";
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fill();

  // BULLETS
  ctx.fillStyle="#fff";
  bullets.forEach((b,i)=>{
    b.y+=b.dy;
    ctx.fillRect(b.x-2,b.y-8,4,8);
    if(b.y<0) bullets.splice(i,1);
  });

  // ZOMBIES
  zombies.forEach((z,zi)=>{
    z.y+=z.speed;
    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(z.x,z.y,z.r,0,Math.PI*2);
    ctx.fill();

    bullets.forEach((b,bi)=>{
      if(Math.hypot(b.x-z.x,b.y-z.y)<z.r){
        zombies.splice(zi,1);
        bullets.splice(bi,1);
        kills++;
      }
    });

    if(Math.hypot(player.x-z.x,player.y-z.y)<z.r+player.r){
      zombies.splice(zi,1);
      player.life-=10;
    }
  });

  life.textContent = player.life;
  kills.textContent = kills;

  if(player.life>0){
    requestAnimationFrame(loop);
  }else{
    ctx.fillStyle="#fff";
    ctx.font="40px Arial";
    ctx.fillText("GAME OVER",canvas.width/2-120,canvas.height/2);
  }
}
</script>

</body>
</html>
